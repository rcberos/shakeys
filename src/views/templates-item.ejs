<% include ./partials/header %>
<% include ./partials/navigation %>

	<div class="container">
		<div class="col-md-10">
			<% rpi_location.forEach(function(item){ %>
				<% if (item.RpiID == ID) { %>
					<h1><%= item.Room %> <small>(RpiID: <span id="tv_id"><%= item.RpiID %></span>)</small></h1>
				<% } %>
			<% }); %>
				
			<table class="table table-hover table-striped">
				<thead>
					<th>Template</th>
					<th>isEnabled</th>
					<th>Paramater</th>
					<th>Update</th>
				</thead>
				<tbody>
					<% rpi_campaign.forEach(function(item){ %>
						<tr><% if (ID == item.RpiID ) { %>
								<% var temp = item.Template; var param; var hasData = false; %>
								<% if (temp == 'temp10') { temp = 'News'} %>
								<% if (temp == 'temp11') { temp = 'Nearby Restaurant'} %>
								<% if (temp == 'temp12') { temp = 'Weather'} %>
								<% if (temp == 'temp13') { temp = 'Currency'} %>
								<% if (temp == 'temp14') { temp = 'Twitter'} %>
								<% if (temp == 'temp15') { temp = 'Hugot'} %>
								<% if (temp == 'temp16') { temp = 'Upcoming Movies'} %>
								<% if (temp == 'temp17') { temp = 'News'} %>
								<% if (temp == 'temp18') { temp = 'Weather'} %>
								<% if (temp == 'temp19') { temp = 'Currency'} %>
								<% if (temp == 'temp20') { temp = 'Twitter'} %>
								<% if (temp == 'temp22') { temp = 'Hugot'} %>
								<% if (temp == 'temp23') { temp = 'Restaurant'} %>
								<% if (temp == 'temp23') { temp = 'Upcoming Movies'} %>
								<% if (temp == 'temp26') { temp = 'Instagram Post'} %>
								<% if (temp == 'temp27') { temp = 'Facebook Post'} %>
								<td><%= temp %></td>
								<% if (item.isEnabled == 0) { %>
									<td><input type="checkbox" id="campaign-<%= item.CampaignID %>" onchange="toggleCampaign(<%= item.CampaignID %>)" class="js-switch"></td>
								<% } else { %>
									<td><input type="checkbox" id="campaign-<%= item.CampaignID %>" onchange="toggleCampaign(<%= item.CampaignID %>)" class="js-switch" checked></td>
								<% } %> 
								<% for(var i=0; i<campaign_files.length; i++) {%>
								   <% if (campaign_files[i].CampaignID == item.CampaignID) { param = campaign_files[i].FileName; hasData = true; break; } %></td>
								<% } %>
									<% if (hasData) { %>
										<td><input type="text" id="param-<%= item.CampaignID %>" class="form-control" value="<%= param %>"></td>
									<% }else { %>
										<td><input type="text" class="form-control" disabled placeholder="parameter not required"></td>
									<% } %>
								
								<% param = '';%>
								<td><button class="btn btn-primary" onclick="updateParameter(<%= item.CampaignID %>)">Update</button></td>
							<% } %>
						</tr>
					<% }) %>
				</tbody>

			</table>

			<a href="/templates-manager" class="btn btn-primary">Go back</a> 
		</div>
	</div>

<% include ./partials/footer %>